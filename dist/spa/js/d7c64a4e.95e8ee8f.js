(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["d7c64a4e"],{"6acb":function(t,e,a){"use strict";var s=a("acf3"),r=a.n(s);r.a},aa09:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"column justify-start items-center q-pa-md"},["init"===t.etape?a("div",{},[a("h1",{staticClass:"text-secondary text-center"},[t._v("Vous souhaitez changer de voiture ?")]),a("q-btn-group",{attrs:{spread:"",unelevated:""}},[a("q-btn",{attrs:{color:"fourth"},on:{click:function(e){return t.sameCar()}}},[t._v("Je veux la même voiture")]),a("q-btn",{attrs:{color:"secondary"},on:{click:function(e){return t.goTo("recherche")}}},[t._v("Je veux changer de modèle")])],1)],1):t._e(),"recherche"==t.etape?a("div",{staticStyle:{width:"100%"}},[a("h1",{staticClass:"text-secondary text-center"},[t._v("Votre nouvelle voiture en quelques clics !")]),a("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[a("q-expansion-item",{staticClass:"bg-primary text-white",attrs:{"expand-separator":"",icon:"search",label:"Recherche","expand-icon-class":"text-white","default-opened":""}},[a("q-card",[a("q-card-section",[a("q-input",{attrs:{outlined:"",label:"Marque"},model:{value:t.form.searchText,callback:function(e){t.$set(t.form,"searchText",e)},expression:"form.searchText"}}),a("h6",{staticClass:"text-tertiary"},[t._v("Kilométrage")]),a("div",{staticClass:"badge-container"},[a("q-badge",{attrs:{color:"secondary"}},[t._v("\n                Min : "+t._s(t.form.minKm)+"\n              ")]),a("q-slider",{attrs:{min:0,max:2e5,step:5,snap:"",label:"","label-always":"",color:"purple"},model:{value:t.form.minKm,callback:function(e){t.$set(t.form,"minKm",e)},expression:"form.minKm"}})],1),a("div",{staticClass:"badge-container"},[a("q-badge",{attrs:{color:"secondary"}},[t._v("\n                Max : "+t._s(t.form.maxKm)+"\n              ")]),a("q-slider",{attrs:{min:0,max:2e5,step:5,snap:"",label:"","label-always":"",color:"purple"},model:{value:t.form.maxKm,callback:function(e){t.$set(t.form,"maxKm",e)},expression:"form.maxKm"}})],1),a("h6",{staticClass:"text-tertiary"},[t._v("Prix")]),a("div",{staticClass:"badge-container"},[a("q-badge",{attrs:{color:"secondary"}},[t._v("\n                min : "+t._s(t.form.minPrice)+"\n              ")]),a("q-slider",{attrs:{min:0,max:1e5,step:500,snap:"",label:"","label-always":"",color:"blue"},model:{value:t.form.minPrice,callback:function(e){t.$set(t.form,"minPrice",e)},expression:"form.minPrice"}})],1),a("div",{staticClass:"badge-container"},[a("q-badge",{attrs:{color:"secondary"}},[t._v("\n                max : "+t._s(t.form.maxPrice)+"\n              ")]),a("q-slider",{attrs:{min:0,max:1e5,step:500,snap:"",label:"","label-always":"",color:"blue"},model:{value:t.form.maxPrice,callback:function(e){t.$set(t.form,"maxPrice",e)},expression:"form.maxPrice"}})],1),a("q-input",{attrs:{outlined:"",label:"Code postal"},model:{value:t.form.codePostal,callback:function(e){t.$set(t.form,"codePostal",e)},expression:"form.codePostal"}})],1),a("q-separator",{attrs:{inset:""}})],1)],1)],1),a("div",{staticClass:"row justify-between",staticStyle:{"margin-top":"15px","margin-bottom":"15px"}},[a("q-btn",{attrs:{flat:"",icon:"keyboard_arrow_left"},on:{click:t.goToPrec}},[t._v("\n        Précédent\n      ")]),a("q-btn",{staticClass:"bg-primary text-white",attrs:{flat:""},on:{click:function(e){return t.displayResults()}}},[t._v("Rechercher")])],1)],1):t._e(),"resultats"===t.etape?a("div",{staticStyle:{width:"100%"}},[a("h1",{staticClass:"text-secondary text-center"},[t._v("Vos résultats")]),a("q-card",{attrs:{bordered:""}},[a("q-card-section",{staticClass:"bg-primary text-white"},[a("div",{staticClass:"text-h6",staticStyle:{display:"flex","align-items":"center"}},[a("q-icon",{staticStyle:{"margin-right":"15px"},attrs:{size:"1.3em",name:"format_list_bulleted"}}),t._v("\n          "+t._s(t.nbResult)+" Résultats\n        ")],1)]),a("q-separator"),a("q-card-section",[a("q-list",{attrs:{bordered:"",separator:""}},t._l(t.results,function(e,s){return a("q-item",{key:s},[a("q-item-section",[e&&e.images&&e.images.length>0?a("q-img",{staticStyle:{height:"140px","max-width":"150px"},attrs:{src:e.images[0]},scopedSlots:t._u([{key:"loading",fn:function(){return[a("div",{staticClass:"text-tertiary"},[a("q-spinner-ios"),a("div",{staticClass:"q-mt-md"},[t._v("Loading...")])],1)]},proxy:!0}],null,!0)}):t._e()],1),a("q-item-section",[a("div",[a("span",{staticClass:"text-subtitle2"},[t._v("Marque - Modèle")]),a("p",[t._v(t._s(e.attributes.brand)+" - "+t._s(e.attributes.model))])]),a("div",[a("span",{staticClass:"text-subtitle2"},[t._v("Prix")]),a("p",[t._v(t._s(e.price)+" €")])]),a("div",[a("span",{staticClass:"text-subtitle2"},[t._v("Kilométrage")]),a("p",[t._v(t._s(e.attributes.mileage)+" km")])])])],1)}),1)],1),a("q-separator")],1),a("div",{staticClass:"row justify-center",staticStyle:{"margin-top":"15px","margin-bottom":"15px"}},[a("q-btn",{attrs:{unelevated:"",color:"primary"},on:{click:function(e){return t.goToPrec()}}},[t._v("Rechercher un autre modèle")])],1)],1):t._e(),"fiche"==t.etape?a("q-card",{attrs:{bordered:""}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[a("i",{staticClass:"material-icons"},[t._v("\n          directions_car\n        ")]),t._v("\n        Fiche voiture\n      ")])]),a("q-separator",{attrs:{inset:""}}),a("q-card-section",[t._v("\n\n      TODO fiche\n\n    ")]),a("q-separator",{attrs:{inset:""}}),a("q-card-actions",{attrs:{align:"between"}},[a("q-btn",{attrs:{flat:""},on:{click:t.goToPrec}},[t._v("Précédent")])],1)],1):t._e()],1)},r=[],i=a("bc3a"),n=a.n(i),o={name:"SearchNewCar",data:function(){return{etape:"init",isSameCar:!1,prec:[],selectedCar:null,oldCarsResults:null,nbResult:0,results:null,form:{minPrice:0,maxPrice:0,codePostal:null,minKm:0,maxKm:0,searchText:null}}},mounted:function(){var t=this;n.a.get("/api/old-car").then(function(e){t.nbResult=e.data.nbResult,t.oldCarsResults=e.data.results,console.log("oldCar.results: ",e.data.results)})},methods:{goTo:function(t){this.prec.push(this.etape),this.etape=t},goToPrec:function(){this.isSameCar&&(this.isSameCar=!1),this.etape=this.prec.pop()},sameCar:function(){this.goTo("resultats"),this.isSameCar=!0,this.prec.push("recherche"),this.results=this.oldCarsResults},displayResults:function(){var t=this;console.log("displayResults"),n.a.get("/api/search").then(function(e){t.results=e.data.results,console.log("cars.results: ",e.data.results),t.goTo("resultats")})},displayDetail:function(){this.goTo("fiche")}}},l=o,c=(a("6acb"),a("2877")),u=Object(c["a"])(l,s,r,!1,null,"717f4428",null);e["default"]=u.exports},acf3:function(t,e,a){}}]);